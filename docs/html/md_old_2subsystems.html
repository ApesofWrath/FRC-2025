<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Maurice: Initialization</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="icon.png"/></td>
  <td id="projectalign">
   <div id="projectname">Maurice<span id="projectnumber">&#160;2025</span>
   </div>
   <div id="projectbrief">Team 668&#39;s robot for Reefscape</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">Initialization</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md9"></a></p>
<p>Every subsystem is a class inheriting from <code>commands2.PIDSubsystem</code>. The <code>__init__()</code> dunder function is overridden to both contain the parent class' <code>__init__()</code> (with the PID values from <code>constants</code> passed) and the motor configuration for each motor.</p>
<h1><a class="anchor" id="autotoc_md10"></a>
Motor configuration</h1>
<p>Motors are stored as a class attribute of type <a href="https://api.ctr-electronics.com/phoenix6/release/python/autoapi/phoenix6/hardware/core/core_talon_fx/index.html#phoenix6.hardware.core.core_talon_fx.CoreTalonFX"><code>TalonFX</code></a> (with the constructor passed the motor's ID from <code>constants</code>). Motors are to be named based off of their location or function on the physical robot. This is the class used for the Kraken's API, and that is the only motor we should ever be using. The motors are configured using <code>phoenix6.configs.TalonFXConfiguration</code> objects, or rather their slot attributes (<code>slot0</code>, <code>slot1</code>, etc). The most important part of this process are the <code>slotN.k_p</code>, <code>slotN.k_i</code>, <code>slotN.k_d</code>, and <code>slotN.k_v</code> values, which are to contain the PID values (once again via <code>constants</code>) for the motor. The configuration represented by the <code>phoenix6.configs.TalonFXConfiguration</code> object is applied by passing it to the motor's <code>configurator.apply()</code> function.</p>
<h1><a class="anchor" id="autotoc_md11"></a>
Making motors move</h1>
<p>Motor movement is the fundamental principle of robots doing things. It is achieved by creating an object from the classes contained in the <a href="https://api.ctr-electronics.com/phoenix6/release/python/autoapi/phoenix6/controls/index.html#phoenix6.controls"><code>phoenix6.controls</code> module</a>. An instance of one of these classes is passed to the <code>set_control()</code> function of a motor. The differences between movement types is determined by the class and parameters used.</p>
<h2><a class="anchor" id="autotoc_md12"></a>
Move at a speed</h2>
<p>Moving the motor continually at a set speed is achieved using the <code>VelocityVoltage</code> class. This class accepts the speed (in rotations per second) as a parameter to the constructor.</p>
<h2><a class="anchor" id="autotoc_md13"></a>
Turn to a specific angle</h2>
<p>Moving the motor to a specific angle requires the <code>PositionDutyCycle</code> class. This class accepts the desired position of the motor (in "turns", meaning 1 is equal to a full rotation) as a parameter to the constructor.</p>
<h2><a class="anchor" id="autotoc_md14"></a>
Turn some amount relative to the current position</h2>
<p>This functionality is also implemented using <code>PositionDutyCycle</code>. However, the position would have to incorporate the motor's current position, which can be accessed via the object returned by motor's <code>get_position()</code> function, specifically the <code>_value</code> attribute. This, too, is in turns.</p>
<h1><a class="anchor" id="autotoc_md15"></a>
Taking action in response to functions</h1>
<p>Subsystem actions are stored as class functions of the subsystem class. The two main paradigms for actions are direct commands and state machines.</p>
<h2><a class="anchor" id="autotoc_md16"></a>
Direct commands</h2>
<p>Under the direct command paradigm, the class functions call code to move motors directly. This is preferable for simpler subsystems, particularly if there are no conditions to switch from one action to another (eg, a climber that operates purely by running motors). Please note that trying to force direct commands on a more complex subsystem can lead to severe mental anguish.</p>
<h2><a class="anchor" id="autotoc_md17"></a>
State machines</h2>
<p>A state machine requires that the subsystem class contain two additional attributes: an enum type (which should be named <code>states</code>) and an enum instance (which should be named <code>state</code>). The enum type is declared with one option per state (in uppercase). The enum instance is set to one of the values of the enum type. Under this paradigm, all externally referenced class functions only change the value of <code>state</code> to a different option of <code>states</code> (depending if a condition is met). Action is taken in the <code>periodic()</code> class function's match statement comparing <code>state</code> to all of <code>states</code>' options. The branches all assign the same set of variables to different <code>controlls.*</code> objects, which are passed to motors outside of the match statement. It is to the massive benefit of code quality that the only thing determined by the state in periodic is the controls used for each motor. If you want to initiate automatic state changes, you may only do this by calling one of the externally-accessible functions in the appropriate case statement.</p>
<h1><a class="anchor" id="autotoc_md18"></a>
Use of periodic</h1>
<p>The <code>periodic()</code> function is used to call <code>super().periodic()</code>, house the state machine logic (mach/case and <code>set_control()</code>) and call <code>wpilib.SmartDashboard</code>'s put functions. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2
</small></address>
</div><!-- doc-content -->
</body>
</html>
